## Мотивация
У нас есть проблемы с производительностью как со стороны клиента, так и со стороны сотрудников производства.
Внедрение мониторинга поможет локализовать проблемные места.
Мониторинг добавит нам информацию о состоянии приложения и внутренних сервисах.
В целом мы сможем снимать метрики о заказах: созданные, заказов с успешной загрузкой файлов, успешной оплатой,
полученных сотрудником, выполненных. И опираясь на данные по месяцам смотреть как идёт развитие бизнеса.
Также помимо этого мы сможем гораздо активнее реагировать на критические ошибки/изменения в результате форс-мажора.

Использовать будем паттерн 4 золотых сигналов и мониторить следующие показатели:
1. Задержка - время на доставку запроса по сети (от API к сервисам)
2. Трафик - HTTP запросы в секунду к нашему API
3. Ошибки - 500 ошибки, а также кол-во мертвых писем в RabbitMQ(Kafka)
4. Насыщенность - Использование CPU для процессоров серверов и QPS для БД.

Метрики которые мы будем использовать в нашем мониторинге:
* dead-letter-exchange - кол-во ошибочных сообщений в RabbitMQ которые не смогли обработать.
* Number of requests (RPS) for internet shop API
* Number of requests (RPS) for CRM API
* CPU % for MES API
* Memory Utilisation for MES API
* Number of connections for shop db instance
* Number of connections for MES db instance
* Response time (latency) for shop API
* Response time (latency) for CRM API
* Size of S3 storage
* Number of HTTP 500 for shop API
* Number of HTTP 500 for CRM API
* Number of HTTP 500 for MES API
* Kb transferred (received) for MES API

План действий: подключить к нашим сервисам метрики (Prometheus), настроить их отображение в Grafana.
Также постепенно подключаем ELK для записи логов нашей системы и возможности разработчикам/аналитикам анализировать логи не в контейнерах.
После чего внедрить в особо "слабые" узлы паттерн снижения нагрузки backpressure.
Если ситуация стабилизировалась, то так и оставляем. Если же нет, то смотрим на узкие места и пробуем их расширить за счет железа или кол-ва инстансов.

